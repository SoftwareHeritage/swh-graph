[workspace]

resolver = "2"

members = [
    "grpc-server",
    "pyo3",
    "rust",
    "stdlib-rs",
    "tools/counters",
    "tools/id2fullname",
    "tools/topology",
    "tools/subgrapher",
]

[workspace.package]
repository = "https://gitlab.softwareheritage.org/swh/devel/swh-graph"
license = "GPL-3.0-or-later"
version = "7.0.0"

[workspace.dependencies]
anyhow = { version="1.0.79", features=["backtrace"] }
dsi-bitstream = "0.5.0"
epserde = "0.8.0"
itertools = { version = "0.11.0" }
rayon = { version = "1.9.0" }
swh-graph = { version = "7.0.0", path = "./rust/" }
#webgraph = "0.3.0"
#webgraph-cli = "0.1.0"
#webgraph-algo = "0.2.0"
webgraph = { git = "https://github.com/vigna/webgraph-rs.git", rev = "dd7049ac56c1bb56868ecb76ac5acf469c08e91d" }
webgraph-cli = { git = "https://github.com/vigna/webgraph-rs.git", rev = "dd7049ac56c1bb56868ecb76ac5acf469c08e91d" }
webgraph-algo = { git = "https://github.com/vigna/webgraph-rs.git", rev = "dd7049ac56c1bb56868ecb76ac5acf469c08e91d" }
#webgraph = { path = "../../webgraph-rs/webgraph" }
#webgraph-cli = { path = "../../webgraph-rs/cli" }
#webgraph-algo =  { path = "../../webgraph-rs/algo" }
sux = "0.8.0"
#sux = {path = "../../../sux-rs" }

# CLI
env_logger = "0.11.5"
clap = { version = "4.1.6", features = ["derive"] }
dsi-progress-logger = "0.8.0"
log = "0.4.17"


[profile.release] # Used for the examples
opt-level = 3             # like --release
lto = "fat"               # Full LTO
overflow-checks = false   # Disable integer overflow checks.
debug = true              # Include debug info.
debug-assertions = false  # Disables debug assertions.
codegen-units=1           # slower compile times, but maybe better perf

[patch.crates-io]
epserde = { git = "https://github.com/vigna/epserde-rs.git", rev = "eda623ea3916de027ffb35b5e07ee2eb9317b79e" }
